<!DOCTYPE html>
<html>
    <head>
        <title>mileStone</title>
        <meta charset="utf-8">

        <style>

            .wrap_cont {
                display: grid;
                grid-template-columns: 100px 1fr;
            }
            
            .wrap_item {
                display: grid;
                grid-template-columns: 50px 1fr;
            }

            .wrap_info {
                display: grid;
                grid-template-columns: 200px 1fr;
            }

            .more_cont {
                display: none;
            }

            .more_less_btn {
                width: 80px;
                height: 30px;
            }

            .btn_title_less {
                display: none;
            }

        </style>

        <script>

            var moreBtnHandler = {

                btnValue: ['more', 'more'],

                __hide_button: function(idx) {
                    document.querySelectorAll('.more_less_btn').item(idx).style.display = "none";
                },

                __show_button: function(idx) {
                    document.querySelectorAll('.more_less_btn').item(idx).style.display = "block";
                },

                __show_content_less: function(idx) {
                    document.querySelectorAll('.btn_title_more').item(idx).style.display = "block";
                    document.querySelectorAll('.btn_title_less').item(idx).style.display = "none";
                    document.querySelectorAll('.more_cont').item(idx).style.display = "none";
                    this.btnValue[idx] = "more";
                },

                __show_content_more: function(idx) {
                    document.querySelectorAll('.btn_title_more').item(idx).style.display = "none";
                    document.querySelectorAll('.btn_title_less').item(idx).style.display = "block";
                    document.querySelectorAll('.more_cont').item(idx).style.display = "block";
                    this.btnValue[idx] = "less";
                },


                click: function(idx) {
                    if (this.btnValue[idx] == 'more') {
                        this.__show_content_more(idx);
                    } else {
                        this.__show_content_less(idx);
                    }
                },

                all_year: function() {
                    for (let i = 0; i < this.btnValue.length; i++) {
                        this.__show_content_less(i);
                        this.__show_button(i);
                    }
                },

                each_year: function(idx) {
                    this.__show_content_more(idx);
                    this.__hide_button(idx);
                }
            }

            var yearOptionHandler = {

                __hide_each_year: function(idx) {
                    document.querySelectorAll('.cont_years').item(idx).style.display = "none";
                },

                __show_each_year: function(idx) {
                    document.querySelectorAll('.cont_years').item(idx).style.display = "block";
                },

                choose: function(self) {
                    const targetValue = self.value;
                    var valueId = {
                        "year_2023" : 0,
                        "year_2022" : 1
                    };

                    if (targetValue == 'year_all') {

                        for (var key in valueId) {
                            this.__show_each_year(valueId[key]);
                        }
                        moreBtnHandler.all_year();
                    } else {
                        
                        for (var key in valueId) {
                            if (key == targetValue) {
                                this.__show_each_year(valueId[key]);
                            } else {
                                this.__hide_each_year(valueId[key]);
                            }
                        }
                        moreBtnHandler.each_year(valueId[targetValue]);
                    }
                }      
            }

        </script>
    </head>

    <body>
        <label>연도</label>
        <select name="years" onchange="
            yearOptionHandler.choose(this);
        ">
            <option value="year_all">모든 연도</option>
            <option value="year_2023">2023</option>
            <option value="year_2022">2022</option>
        </select>
        <br>
        <div>


            
            <ul class="cont_years">
                <div role="text" class="wrap_cont">
                    <div class="title_cont">
                        <strong>2023</strong>
                    </div>
                    <div class="inner_cont">


                        <div class="wrap_item">
                            <em>12월</em>
                            <div class="area_cont">

                                <ul class="cont_info">
                                    <div class = "wrap_info">
                                        <div class="info_title">
                                            2023-12-title1
                                        </div>
                                        <div class="info_text">
                                            <li>2023-12-1-cont1</li>
                                            <li>2023-12-1-cont2</li>
                                        </div>
                                    </div>
                                </ul>

                                <ul class="cont_info">
                                    <div class = "wrap_info">
                                        <div class="info_title">
                                            2023-12-title2
                                        </div>
                                        <div class="info_text">
                                            <li>2023-12-2-cont1</li>
                                            <li>2023-12-2-cont2</li>
                                        </div>
                                    </div>
                                </ul>

                            </div>
                        </div>


                         <div class="more_cont"> 

                            <div class="wrap_item">
                                <em>11월</em>
                                <div class="area_cont">

                                    <ul class="cont_info">
                                        <div class = "wrap_info">
                                            <div class="info_title">
                                                2023-11-title1
                                            </div>
                                            <div class="info_text">
                                                <li>2023-11-1-cont1</li>
                                                <li>2023-11-1-cont2</li>
                                            </div>
                                        </div>
                                    </ul>

                                    <ul class="cont_info">
                                        <div class = "wrap_info">
                                            <div class="info_title">
                                                2023-11-title2
                                            </div>
                                            <div class="info_text">
                                                <li>2023-11-2-cont1</li>
                                                <li>2023-11-2-cont2</li>
                                            </div>
                                        </div>
                                    </ul>

                                </div>
                            </div>
                        </div>


                        <button class="more_less_btn" type="button" onclick="
                            moreBtnHandler.click(0);
                        ">
                            <span class="btn_title_more">더보기</span>
                            <span class="btn_title_less">숨기기</span>
                        </button>
                    </div>


                </div>
            </ul>



            <ul class="cont_years">
                <div role="text" class="wrap_cont">
                    <div class="title_cont">
                        <strong>2022</strong>
                    </div>
                    <div class="inner_cont">


                        <div class="wrap_item">
                            <em>12월</em>
                            <div class="area_cont">

                                <ul class="cont_info">
                                    <div class = "wrap_info">
                                        <div class="info_title">
                                            2022-12-title1
                                        </div>
                                        <div class="info_text">
                                            <li>2022-12-1-cont1</li>
                                            <li>2022-12-1-cont2</li>
                                        </div>
                                    </div>
                                </ul>

                                <ul class="cont_info">
                                    <div class = "wrap_info">
                                        <div class="info_title">
                                            2022-12-title2
                                        </div>
                                        <div class="info_text">
                                            <li>2022-12-2-cont1</li>
                                            <li>2022-12-2-cont2</li>
                                        </div>
                                    </div>
                                </ul>

                            </div>
                        </div>


                         <div class="more_cont"> 

                            <div class="wrap_item">
                                <em>11월</em>
                                <div class="area_cont">

                                    <ul class="cont_info">
                                        <div class = "wrap_info">
                                            <div class="info_title">
                                                2022-11-title1
                                            </div>
                                            <div class="info_text">
                                                <li>2022-11-1-cont1</li>
                                                <li>2022-11-1-cont2</li>
                                            </div>
                                        </div>
                                    </ul>

                                    <ul class="cont_info">
                                        <div class = "wrap_info">
                                            <div class="info_title">
                                                2022-11-title2
                                            </div>
                                            <div class="info_text">
                                                <li>2022-11-2-cont1</li>
                                                <li>2022-11-2-cont2</li>
                                            </div>
                                        </div>
                                    </ul>

                                </div>
                            </div>
                        </div>


                        <button class="more_less_btn" type="button" onclick="
                            moreBtnHandler.click(1);
                        ">
                            <span class="btn_title_more">더보기</span>
                            <span class="btn_title_less">숨기기</span>
                        </button>
                    </div>


                </div>
            </ul>


        </div>
    </body>
</html>